{% extends 'blog/base.html' %}
{% load staticfiles %}
{% load django_markdown %}
{% block ogtags %}
<meta property="og:type" content="article" />
<meta property="og:locale" content="en_US" />
<meta property="og:title" content="{{ post.title }}" />
<meta property="article:author" content="https://www.facebook.com/sujiniworld" />
<meta property="og:description" content="{{ post.summary|truncatechars:230 }}" />
<meta property="og:image"content="{{ post.image.url }}" />
<meta property="og:url" content="{% url 'post_detail' slug=post.slug %}" />
{% endblock %}
{% block content %}
<section class="page-name">
  <h1> { BLOG }</h1>
  <p> Learning, Experiences, Thoughts </p>
</section>
<article class="mdl-grid">
  <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
  <div class="post-card mdl-cell mdl-cell--8-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
  <div class="post-card_main-image">
    <img itemprop="image" src="{{ post.image.url }}" >
  </div>
  <div class="post-card_category" style="background: {{ post.category.color }}">
    {{ post.category.title }}
  </div>
  <div class="post-card_body">
    <div class="post-card_btn" style="background: {{ post.category.color }}">
      <img class="post-category-icon" src="{% static post.category.image_url %}" onload="imgLoaded(this)">
    </div>
    <h1 itemprop="name">{{ post.title }}</h1>
    <div class="post-card_date">
      {% if post.published_date %}
      <i class="fa fa-clock-o"></i>{{ post.published_date }}
      {% endif %}
    </div>
    <div itemprop="description" class="markdown-body">
      {{ post.body|markdown }}
    </div>
    <div class="heart-particle-box" align="center">
      <button class="likes post-likes" id="heart-icon" data-post-id="{{post.id}}">
      {% if liked %}
      <i class="heart-shaped fa fa-heart" style="display: line-block"></i>
      <i class="heart-shaped fa fa-heart-o" style="display: none"></i>
      {% else %}
      <i class="heart-shaped fa fa-heart" style="display: none"></i>
      <i class="heart-shaped fa fa-heart-o" style="display: line-block"></i>
      {% endif %}
    </button>
      <div class="like_count_blog" id="heart-counter">{{ post.likes }}</div>
    </div>
    <footer class="post-footer">
      <span class="post-comment">
      <i class="fa fa-comment-o"></i>
      <a href="{% url 'post_detail' slug=post.slug %}#disqus_thread"></a></span>
      <div class="post-share">
        <div class="more-button">
          <i class="fa fa-share-alt"></i>
          <div class="container">
            <a href="#" onclick="fbshare()" class="share-btn">
            <i class="fa fa-facebook"></i></a>
            <a href="#" class="share-btn tweet"
              data-text = "{{ post.title }}"
              data-via="sujinleeme"
              data-hashtags="{{ post.category.title }}">
            <i class="fa fa-twitter"></i></a>
            <a href="https://plus.google.com/share?url=http://sujinlee.me/blog/{{post.slug }}"
              onclick="javascript:window.open(this.href,
              '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"
              class="share-btn">
            <i class="fa fa-google-plus"></i></a>
          </div>
        </div>
      </div>
    </footer>
  </div>
</article>
<div class="comment-entry mdl-grid">
  <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
  <div class="post-card mdl-cell mdl-cell--8-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
    <div class="disqus" id="disqus_thread"></div>
  </div>
</div>
<nav class="pagination_nav mdl-grid">
  <a href="{% url 'post_detail' slug=previous.slug %}">
    <div class="pagination_col mdl-cell mdl-cell--6-col"
      style="background: {{post.category.color}}" rippleria>
      {% if previous %}
      <span class="previous">Previous</span>
      <i class="fa fa-angle-left fa-2x"></i>
      <span class="title-left">{{ previous.title|truncatechars:46 }}</span>
  </a>
  {% endif %}
  </div>
  <div class="pagination_col mdl-cell mdl-cell--6-col"
    style="background: {{post.category.color}}" rippleria>
    {% if next %}
    <a href="{% url 'post_detail' slug=next.slug %}">
    <span class="next">Next</span>
    <i class="fa fa-angle-right fa-2x"></i>
    <span class="title-right">{{ next.title|truncatechars:46 }}</span></a>
    {% endif %}
  </div>
</nav>
<div class="go-top"><i class="fa fa-angle-up"></i></div>
<script>
  function fbshare(){
      FB.ui({
        method: 'share',
        href: 'http://sujinlee.me/blog/{{ post.slug }}',
        mobile_iframe: true,
        {% if post.image %}
        picture: 'http://sujinlee.me/{{ post.image.url }}', {% endif %}
        caption: 'sujinlee.me',
      }, function(response){});
  }
</script>
{% endblock %}
