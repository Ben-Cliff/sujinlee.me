{% extends 'blog/base.html' %}
{% load staticfiles %}
{% load django_markdown %}
{% block title %}
<title>{{ project.title }}</title>
{% endblock %}
{% block ogtags %}
  <meta property="og:type" content="article" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:title" content="{{ post.title }}" />
  <meta property="article:author" content="https://www.facebook.com/sujiniworld" />
  <meta property="og:description" content="{{ project.summary|truncatechars:230 }}" />
  <meta property="og:image"content="{{ project.image.url }}" />
  <meta property="og:url" content="http://sujinlee.me/project/{{ project.slug }}" />
{% endblock %}
{% block content %}
<section class="page-name">
  <h1> { PROJECT }</h1>
  <p> Web, Music </p>
</section>
<article class="mdl-grid">
  <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
  <div class="post-card mdl-cell mdl-cell--8-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
  <div class="post-card_main-image">
    <img itemprop="image" src="{{ project.image.url }}" onload="imgLoaded(this)">
  </div>
  <div class="post-card_category" style="background: {{ project.category.color }}">
    {{ project.category.title }}
  </div>
  <div class="post-card_body">
    <div class="post-card_btn" style="background: {{ project.category.color }}">
      <img class="post-category-icon" src="{% static project.category.image_url %}">
    </div>
    <h1 itemprop="name">{{ project.title }}</h1>
    <div class="post-card_date">
      {% if project.published_date %}
      <i class="fa fa-clock-o"></i>{{ project.published_date }}
      {% endif %}
    </div>
    <div itemprop="description" class="markdown-body">
      {{ project.body|markdown }}
    </div>

    <div class="heart-particle-box" align="center">
      <button class="likes project-likes" id="heart-icon" data-project-id="{{project.id}}">
      {% if liked %}
      <i class="heart-shaped fa fa-heart" style="display: line-block"></i>
      <i class="heart-shaped fa fa-heart-o" style="display: none"></i>
      {% else %}
      <i class="heart-shaped fa fa-heart" style="display: none"></i>
      <i class="heart-shaped fa fa-heart-o" style="display: line-block"></i>
      {% endif %}
    </button>
      <div class="like_count_project" id="heart-counter">{{ project.likes }}</div>
    </div>

    <footer class="post-footer">
      <span class="post-comment">
      <i class="fa fa-comment-o"></i>
      <a href="{% url 'project_detail' slug=project.slug %}#disqus_thread"></a></span>
      <div class="post-share">
        <div class="more-button">
          <i class="fa fa-share-alt"></i>
          <div class="container">
            <a href="#" onclick="fbshare()" class="share-btn">
            <i class="fa fa-facebook"></i></a>
            <a href="#" class="share-btn tweet"
              data-text = "{{ project.title }}"
              data-via="sujinleeme"
              data-hashtags="{{ project.category.title }}">
            <i class="fa fa-twitter"></i></a>
            <a href="https://plus.google.com/share?url=http://sujinlee.me/project/{{project.slug }}"
              onclick="javascript:window.open(this.href,
              '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=600,width=600');return false;"
              class="share-btn">
            <i class="fa fa-google-plus"></i></a>
          </div>
        </div>
      </div>
    </footer>
  </div>
</article>
<div class="comment-entry mdl-grid">
  <div class="mdl-cell mdl-cell--2-col mdl-cell--hide-tablet mdl-cell--hide-phone"></div>
  <div class="post-card mdl-cell mdl-cell--8-col mdl-cell--12-col-tablet mdl-cell--12-col-phone">
    <div class="disqus" id="disqus_thread"></div>
  </div>
</div>
<nav class="pagination_nav mdl-grid">
  <a href="{% url 'project_detail' slug=previous.slug %}">
    <div class="pagination_col mdl-cell mdl-cell--6-col"
      style="background: {{project.category.color}}" rippleria>
      {% if previous %}
      <span class="previous">Previous</span>
      <i class="fa fa-angle-left fa-2x"></i>
      <span class="title-left">{{ previous.title|truncatechars:46 }}</span>
  </a>
  {% endif %}
  </div>
  <div class="pagination_col mdl-cell mdl-cell--6-col"
    style="background: {{project.category.color}}" rippleria>
    {% if next %}
    <a href="{% url 'project_detail' slug=next.slug %}">
    <span class="next">Next</span>
    <i class="fa fa-angle-right fa-2x"></i>
    <span class="title-right">{{ next.title|truncatechars:46 }}</span></a>
    {% endif %}
  </div>
</nav>
<div class="go-top"><i class="fa fa-angle-up"></i></div>
<script>

function fbshare() {
    FB.ui({
            method: 'share_open_graph',
            action_type: 'og.shares',
            action_properties: JSON.stringify({
                object: {
                    'og:url': 'http://sujinlee.me/blog/{{ project.slug }}',
                    'og:title': '{{ project.title }}',
                    'og:description': '{{ project.summary }}',
                    'og:image': '{{ project.image.url }}'
                }
            })
        },
        // callback
        function(response) {
            if (response && !response.error_message) {
                // then get post content
                alert('successfully posted.');
            } else {
                alert('Something went error.');
            }
        });
}
</script>
{% endblock %}
